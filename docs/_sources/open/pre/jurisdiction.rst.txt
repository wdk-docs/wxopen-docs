第三方平台的权限说明
====================

授权账号列表
------------

第三方平台可以使用接口拉取当前所有已授权的帐号基本信息。

HTTP 请求:POST

HTTP 调用:
https://api.weixin.qq.com/cgi-bin/component/api_get_authorizer_list?component_access_token=COMPONENT_ACCESS_TOKEN

调用示例:

.. code:: json

   {
     "component_appid": "appid_value",
     "offset": 0,
     "count": 100
   }

参数说明:

=============== ======== ===================
参数            是否必须 说明
=============== ======== ===================
component_appid 是       第三方平台 APPID
offset          是       偏移位置/起始位置
count           是       拉取数量,最大为 500
=============== ======== ===================

正常情况下,会返回:

.. code:: json

   {
     "total_count": 33,
     "list": [
       {
         "authorizer_appid": "authorizer_appid_1",
         "refresh_token": "refresh_token_1",
         "auth_time": auth_time_1
       },
       {
         "authorizer_appid": "authorizer_appid_2",
         "refresh_token": "refresh_token_2",
         "auth_time": auth_time_2
       }
     ]
   }

公众号权限集
------------

为了便于管理,也为了帮助公众号和小程序运营者快速理解和授权自己的接口和功能权限,将公众号和小程序的接口权限组织分类如下:

公众号权限集:

-  消息管理权限
-  自定义菜单权限
-  用户管理权限
-  帐号服务权限
-  网页服务权限
-  微信小店权限
-  微信多客服权限
-  群发与通知权限
-  微信卡券权限
-  素材管理权限
-  微信扫一扫权限
-  微信连 WIFI 权限
-  微信摇周边权限
-  微信门店权限
-  城市服务接口权限
-  微信电子发票权限
-  微信开放平台帐号管理权限
-  小程序权限集
-  帐号管理权限
-  开发管理与数据分析权限
-  客服消息管理权限
-  微信开放平台帐号管理权限
-  小程序插件管理权限集
-  小程序附近地点权限集

请注意:

1. 当开发者对已全网发布的第三方平台做了权限修改时,如果还没有覆盖现网全网发布的状态,则测试公众号时,在授权页看到的权限仍将保持为现网的权限选项。
2. 各类型和是否认证的公众号具体拥有哪些 API
   权限(每个授权的公众号,都可以通过下文将提到的接口获知公众号类型),请详见:\ http://mp.weixin.qq.com/wiki/7/2d301d4b757dedc333b9a9854b457b47.html,
   小程序接口请详见:\ https://mp.weixin.qq.com/debug/wxadoc/dev/api/
3. 公众号即使暂时没有某项接口权限(如微信卡券接口权限),也可以将其微信卡券权限授权给第三方平台。而后来该公众号获得该接口后,第三方平台可以马上代替该公众号调用这个接口。

第三方平台如需在已有能力中增加需要新权限的新功能,则需注意:

1. 只要第一次全网发布(包括后续的修改后全网发布),当前在使用的用户永远不受影响,可以正常使用。
2. 第三方平台有需要时可以增加新的权限,以满足新的业务需求,第三方平台可以在微信开放平台中修改平台权限申明,修改后审核通过并全网发布后,新授权的公众号授权时会增加新权限的申请,已授权的老用户,旧有权限不影响(换句话其业务也不影响),但新权限集需要其升级授权后才可获得(原因是需要尊重用户选择,比如微信增加了一个新业务如微信卡券,不能想当然地认为用户愿意把这个新业务授权给原来的第三方来做)。
3. 在第三方平台的设计上,以素材管理举例,建议开发者如下设计:增加素材管理功能后,新用户当然还是正常授权(这时他会授权所有申明的权限给第三方)。而对于老用户,在他进入素材管理功能内时,提示需要升级授权才可使用新功能,引导用户进入授权页升级即可。

下面对各权限进行详细介绍(以下所有权限都可以同时授权给多家第三方平台):

公众号权限如下:

消息管理权限(权限集 id:1)
~~~~~~~~~~~~~~~~~~~~~~~~~

指公众号第三方平台方在获得该权限后,可以获得被授权公众号进行消息管理和回复。具体包括:

1. 接收用户发来的消息(从而也可以做关键词自动回复等能力),请注意,用户触发的各个业务的事件,是放在各个业务权限里面去推送给相关获得了该权限授权的第三方
2. 通过客服接口向用户发送消息
3. 获取和设置语音识别开关状态
4. 获取和设置地理位置上报的开关状态
5. 上传下载多媒体文件接口
6. 关注/取消关注事件推送(包括带参数二维码带来的关注事件),及关注后的自动回复

需要特别注意的是,第三方平台只需获得某个业务模块的授权(而不需要获得客服与菜单权限的授权),然后在收到该业务模块事件推送后,如果该事件是允许进行
5
秒内被动回复消息给粉丝的,那么第三方就可以被动回复(业务模块的哪些事件推送允许被动回复用户,哪些不允许,需咨询具体业务模块),点击查看被动回复接口文档

另请注意,如果第三方希望实现实时获知公众号有新粉丝关注,只需要收到关注事件后回复
success
即可,不必另行回复,免得公众号出现多个第三方同时进行粉丝关注后的自动回复。

自定义菜单权限(权限集 id:15)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

指公众号第三方平台方在获得该权限后,可以获得被授权公众号进行自定义菜单的设置和响应。具体包括:

1. 自定义菜单的创建/查询和删除,包括个性化菜单
2. 自定义菜单点击事件接收,和根据该事件进行的 5 秒内被动回复

用户管理权限(权限集 id:2)
~~~~~~~~~~~~~~~~~~~~~~~~~

指公众号第三方平台方在获得该权限后,可以获得被授权公众号的用户管理权限。具体包括:

1. 获取用户基本信息接口
2. 获取用户列表接口
3. 用户分组管理接口
4. 用户备注名设置接口
5. 设置用户地理位置的开关及上报方式
6. 获取用户地理位置上报的事件推送
7. 关注/取消关注公众号事件推送

帐号服务权限(权限集 id:3)
~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要进行公众帐号的帐号管理,包括获取和设置公众帐号信息,由于可供多方获取和设置,故授权不互斥。具体包括:

1. 生成带参数二维码接口
2. 扫描带参数二维码时(而不是关注后)的事件接收(请注意,带参数二维码扫码后关注的事件推送,是会推送给具备消息与菜单管理权限集的第三方)
3. 获取公众帐号基础信息(头像昵称/帐号类型等,此接口暂为服务方独有)
4. 上传下载多媒体文件接口

网页服务权限(权限集 id:4)
~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要指公众号第三方平台可以代替公众帐号发起微信网页授权,并在授权后可以合法获得相关的授权信息,还包括可以代替公众号使用
JS SDK。具体包括:

1. 发起微信内网页授权的权限
2. 授权后获取授权用户的基本信息(权限根据应用授权作用域 scope
   的不同而不同:scope 为 snsapi_base 时不弹出授权页面但只能获取用户
   openid)；scope 为 snsapi_userinfo 时弹出授权页面但可通过 openid
   拿到用户昵称、性别、所在地)
3. 代替公众号使用 JS SDK

微信小店权限(权限集 id:5)
~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要是指管理微信公众平台小店的功能。具体包括:

1. 微信小店所有接口权限
2. 微信小店所有事件推送(事件将推送到创建服务时填写的公众号消息与事件接收
   URL)

微信多客服权限(权限集 id:6)
~~~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要指能否设置和获取公众账号的多客服功能开关的状态。一旦打开开关之后,客服消息将不再推送给第三方平台方,而是推送给微信多客服功能后台。此时,公众号运营者需要在
mp.weixin.qq.com 的多客服模块中下载多客服 PC
客户端来使用,与发客服消息的粉丝进行 CRM 沟通互动。具体包括:

1. 微信多客服所有接口权限

群发与通知权限(权限集 id:7)
~~~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要指公众号用于通知用户的接口能力。由于允许多个第三方开发者就各自业务去通知用户,因此该权限可以授权给多个第三方平台方,即授权不互斥,具体包括:

1. 模板消息接口
2. 高级群发接口

微信卡券权限(权限集 id:8)
~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要指微信卡券相关的所有接口权限和事件推送。具体包括:

1. 微信卡券所有接口权限
2. 微信卡券所有事件推送(事件将推送到创建服务时填写的公众号消息与事件接收
   URL)
3. 上传下载多媒体文件接口

微信扫一扫权限(权限集 id:9)
~~~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要指微信扫一扫的所有接口权限和事件推送。具体包括:

1. 微信扫一扫的所有接口权限和事件推送

微信连 WI-FI 权限(权限集 id:10)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要指微信连 WI-FI 的所有接口权限和事件推送。具体包括:

1. 微信连 WIFI 所有接口权限

素材管理权限(权限集 id:11)
~~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要指用于第三方开发者帮助公众号管理图文消息、图片、语音、视频、缩略图等素材,具体包括:

1. 新增和获取临时素材(原上传下载多媒体文件接口)
2. 新增、获取、删除永久素材
3. 修改永久图文消息素材
4. 获取各类型素材总数和列表

微信摇周边权限(权限集 id:12)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要指摇一摇周边的所有接口权限和事件推送。具体包括:

1. 摇一摇周边所有接口权限

微信门店权限(权限集 id:13)
~~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要指线下门店的所有接口权限和事件推送。具体包括:

1. 线下门店所有接口权限

城市服务接口权限(权限集 id:22)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要指城市服务内向用户发送消息,沉淀办事记录和事件推送。具体包括:

1. 城市服务所有接口权限

微信电子发票权限(权限集 id:26)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要指公众号使用微信电子发票的权限。具体包括:

1. 唤起“插入微信发票”的授权页的接口
2. 将电子发票插入微信卡包的接口
3. 微信电子发票的报销的接口

微信开放平台帐号绑定权限(权限集 id:24)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

第三方平台在获得此权限后,可以代替已授权的公众号创建开放平台帐号或进行绑定/解绑操作。绑定在同一个开放平台帐号下的公众号及小程序,同一用户
unionid
一致。此权限集只可以授权给一个第三方平台,即授权互斥。权限集内接口具体包括:

1. 创建开放平台帐号并绑定公众号
2. 将公众号绑定到已有开放平台帐号下
3. 将公众号从开放平台帐号下解绑
4. 获取公众号所绑定的开放平台帐号

API
文档详见:open.weixin.qq.com-资源中心-第三方平台-代公众号实现业务-微信开放平台帐号管理

小程序权限如下:

帐号管理权限(权限集 id:17)
~~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要进行小程序的帐号管理,包括获取和设置小程序帐号信息,由于可供多方获取和设置,故授权不互斥。具体包括:

1. 生成带参数二维码接口
2. 用户访问状态修改与查询
3. 获取公众帐号基础信息(头像昵称/帐号类型等,此接口暂为服务方独有)

开发管理与数据分析权限(权限集 id:18)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要进行小程序的代码开发管理,绑定体验者,模版消息,配置服务器信息,获取小程序数据等。为防止代码相互覆盖,此授权只能一个第三方平台。具体包括:

1.  代码审核相关的事件推送
2.  提交代码体验
3.  获取体验二维码
4.  绑定体验者
5.  提交代码审核
6.  代码审核状态查询
7.  发布代码
8.  服务器地址设置
9.  模版消息
10. 微信登录
11. 数据分析

客服消息管理权限(权限集 id:19)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

该权限主要进行小程序的客服消息的管理和开发,可授权给多家第三方平台。具体包括:

1. 发送客服消息
2. 上传素材接口

微信开放平台帐号绑定权限
~~~~~~~~~~~~~~~~~~~~~~~~

第三方平台在获得此权限后,可以代替已授权的小程序创建开放平台帐号或进行绑定/解绑操作。绑定在同一个开放平台帐号下的公众号及小程序,用户
unionid
一致。此权限集只可以授权给一个第三方平台,即授权互斥。权限集内接口具体包括:

1. 创建开放平台帐号并绑定小程序
2. 将小程序绑定到已有开放平台帐号下
3. 将小程序从开放平台帐号下解绑
4. 获取小程序所绑定的开放平台帐号

API
文档详见:open.weixin.qq.com-资源中心-第三方平台-代小程序实现业务-微信开放平台帐号管理

小程序插件管理权限集(权限集 id:40)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

第三方平台获得此权限后,可以代替小程序管理插件。此权限集可以授权给多个第三方平台,权限集内接口具体如下:

1. 申请添加插件
2. 查询已添加的插件
3. 删除已添加的插件

小程序附近地点权限集(权限集 id:37)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

第三方平台获得该权限后,可帮助小程序创建、管理附近地点,可设置小程序展示在“附近小程序”入口中。

权限集内具体接口如下:

`附近地点接口 <https://developers.weixin.qq.com/miniprogram/dev/api/nearby.html>`__

小程序基本信息设置权限(权限集 id:30)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

第三方平台获得该权限后,可帮助通过接口创建的小程序设置名称、头像、简介、类目等基本信息。

权限集内具体接口如下:

`小程序基本信息接口 <https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=21528465979XX32V&token=&lang=zh_CN>`__
